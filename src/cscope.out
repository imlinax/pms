cscope 15 $HOME/develop/c/pms/src -q 0000000087 0000008761
	@employee.c

1 
	~<°dio.h
>

2 
	~"em∂oyì.h
"

3 
	$show_Æl_emöfo
(
EMPLOYEE
* 
em_hód
)

5 
EMPLOYEE
* 
±mp
=
em_hód
->
√xt
;

6 if(
±mp
==
NULL
)

8 
	`¥ötf
("ÊöÇÊó†ÂëòÂ∑•‰ø°ÊÅØ\n");

9 
	`£tbuf
(
°dö
,
NULL
);

10 
	`gëch¨
();

13 
±mp
!=
NULL
)

15 
	`show_em∂oyì
(
±mp
);

16 
±mp
ıtmp->
√xt
;

19 
	}
}

20 
	$show_em∂oyì
(
EMPLOYEE
* 
≥m
)

22 *
tôÀ
[]={"ÂàùÁ∫ß","‰∏≠Á∫ß","È´òÁ∫ß"};

23 if(
≥m
==
NULL
)

27 
	`¥ötf
("ID:%d\n",
≥m
->
id
);

28 
	`¥ötf
("ÂßìÂêç:%s\n",
≥m
->
«me
);

29 
	`¥ötf
("ËÅåÁß∞:%s\n",
tôÀ
[
≥m
->title]);

30 
	`¥ötf
("Âü∫Êú¨Ëñ™ËµÑ:%dÂÖÉ\n",
≥m
->
ßœy
);

31 if(
≥m
->
⁄löe
)

33 
	`¥ötf
("Â∑•‰ΩúÁä∂ÊÄÅ:Âú®ËÅå\n");

38 
	`¥ötf
("Â∑•‰ΩúÁä∂ÊÄÅ:Á¶ªËÅå\n");

40 
	}
}

41 
	$add_em∂oyì
(
EMPLOYEE
 *
em_hód
,EMPLOYEE *
≥m
)

43 
EMPLOYEE
 *
±mp
=
em_hód
;

44 if(
≥m
==
NULL
)

46 
	`Ârötf
(
°dîr
,"ÂëòÂ∑•‰ø°ÊÅØ‰∏∫Á©∫,Ê∑ªÂä†Â§±Ë¥•\n");

49 
±mp
->
√xt
!=
NULL
)

51 
±mp
ıtmp->
√xt
;

53 
≥m
->
√xt
=
NULL
;

54 
±mp
->
√xt
=
≥m
;

56 
	}
}

58 
	$gë_em∂oyì_cou¡
(
EMPLOYEE
* 
em_hód
)

60 
cou¡
=0;

61 if(
em_hód
==
NULL
)

63 
	`Ârötf
(
°dîr
,"ÂëòÂ∑•ÈìæË°®ÈîôËØØ");

66 
EMPLOYEE
 *
±mp
=
em_hód
;

67 
±mp
->
√xt
!=
NULL
)

69 
cou¡
++;

71  
cou¡
;

72 
	}
}

	@employee.h

1 #i‚de‡
_EMPLOYEES_H


2 
	#_EMPLOYEES_H


	)

4 
	#EMP_SAVE_SIZE
 ((
EMPLOYEE
)-(EMPLOYEE*))

	)

5 
	sem∂oyì


7 
	mid
;

8 
	m«me
[32];

9 
	mtôÀ
;

10 
	mßœy
;

11 
	m⁄löe
;

12 
em∂oyì
* 
	m√xt
;

13 }
	tEMPLOYEE
;

15 
show_Æl_emöfo
(
EMPLOYEE
* 
em_hód
);

16 
show_em∂oyì
(
EMPLOYEE
* 
≥m
);

17 
gë_em∂oyì_cou¡
(
EMPLOYEE
* 
em_hód
);

	@fileop.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~"em∂oyì.h
"

4 
	~"ªw¨dpunish.h
"

5 
	~"globÆ.h
"

6 
	~"fûe›.h
"

10 
GINFO
 *
	$lﬂd_Æl
(
FILE
 *
Âem
,FILE *
ÂΩ
)

12 
GINFO
 *
pgöfo
=(GINFO*)
	`mÆloc
((GINFO));

13 
	`f£ek
(
Âem
,0,
SEEK_SET
);

14 
	`f£ek
(
ÂΩ
,0,
SEEK_SET
);

15 if(
	`‰ód
(
pgöfo
,(
GINFO
),1,
Âem
)<1)

17 
	`Ârötf
(
°dîr
,"Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂Â§±Ë¥•!\n");

18 
	`exô
(1);

20 
pgöfo
->
em_hód
=
	`lﬂd_em∂oyìs
(
Âem
,pgöfo->
em_cou¡
);

21 
pgöfo
->
Ω_hód
=
	`lﬂd_ªw¨dpunish
(
ÂΩ
,pgöfo->
Ω_cou¡
);

23  
pgöfo
;

24 
	}
}

28 
EMPLOYEE
 *
	$lﬂd_em∂oyìs
(
FILE
 *
Â
,
cou¡
)

30 
i
=0;

31 if(
cou¡
<1)

33  
NULL
;

35 
EMPLOYEE
* 
phód
=(EMPLOYEE*)
	`ˇŒoc
(1,
EMP_SAVE_SIZE
);

36 
EMPLOYEE
* 
±mp
=
phód
;

37 
	`f£ek
(
Â
,(
GINFO
),
SEEK_SET
);

38 if(
phód
==
NULL
)

40 
	`exô
(1);

42 
i
=0;i<
cou¡
;i++)

44 
±mp
->
√xt
=(
EMPLOYEE
*)
	`mÆloc
(
EMP_SAVE_SIZE
);

45 if(
±mp
->
√xt
==
NULL
)

47 
	`Ârötf
(
°dîr
,"memoryállocationÉrror!\n");

48 
	`exô
(1);

50 
	`‰ód
(
±mp
->
√xt
,(
EMP_SAVE_SIZE
),1,
Â
);

51 
±mp
ıtmp->
√xt
;

53 
±mp
->
√xt
=
NULL
;

54  
phód
;

55 
	}
}

59 
RP
 *
	$lﬂd_ªw¨dpunish
(
FILE
 *
Â
,
cou¡
)

61 
i
=0;

62 if(
cou¡
<1)

64  
NULL
;

66 
RP
 * 
phód
=(RP*)
	`ˇŒoc
(1,
RP_SAVE_SIZE
);

67 
RP
 * 
±mp
=
phód
;

68 
	`f£ek
(
Â
,(
GINFO
),
SEEK_SET
);

69 if(
±mp
==
NULL
)

71 
	`exô
(1);

73 
i
=0;i<
cou¡
;i++)

75 
±mp
->
√xt
=(
RP
*)
	`mÆloc
(
RP_SAVE_SIZE
);

76 if(
±mp
->
√xt
==
NULL
)

78 
	`Ârötf
(
°dîr
,"memoryállocationÉrror!\n");

79 
	`exô
(1);

81 
	`‰ód
(
±mp
->
√xt
,(
RP_SAVE_SIZE
),1,
Â
);

82 
±mp
ıtmp->
√xt
;

84 
±mp
->
√xt
=
NULL
;

85  
phód
;

86 
	}
}

91 
	$ßve_Æl
(
FILE
 *
Â
,
GINFO
* 
pgöfo
)

93 if(
Â
==
NULL
)

97 
	`f£ek
(
Â
,0,
SEEK_SET
);

98 if(
	`fwrôe
(
pgöfo
,(
GINFO
),1,
Â
)!=1)

100 
	`Ârötf
(
°dîr
,"save fileÉrror!\n");

101 
	`exô
(1);

104 
	}
}

108 
	$ßve_em∂oyìs
(
FILE
 *
Â
,
EMPLOYEE
* 
em_hód
)

110 
EMPLOYEE
* 
≥m
=
em_hód
->
√xt
;

111 if(
Â
==
NULL
)

115 
	`f£ek
(
Â
,(
GINFO
),
SEEK_SET
);

116 
≥m
!=
NULL
)

118 if(
	`fwrôe
(
≥m
,(
EMP_SAVE_SIZE
),1,
Â
)!=1)

120 
	`Ârötf
(
°dîr
,"save fileÉrror!\n");

121 
	`exô
(0);

125 
	}
}

129 
	$ßve_ªw¨dpunish
(
FILE
 *
Â
,
RP
* 
¥p
)

132 
	}
}

	@fileop.h

1 #i‚de‡
_FILEOP_H


2 
	#_FILEOP_H


	)

4 
	~<°dio.h
>

5 
	~"globÆ.h
"

6 
	~"em∂oyì.h
"

7 
GINFO
 *
lﬂd_Æl
(
FILE
 *
Âem
,FILE*
ÂΩ
);

8 
EMPLOYEE
 *
lﬂd_em∂oyìs
(
FILE
 *
Â
,
cou¡
);

9 
RP
 *
lﬂd_ªw¨dpunish
(
FILE
 *
Â
,
cou¡
);

11 
ßve_Æl
(
FILE
 *
Â
,
GINFO
* 
pgöfo
);

12 
ßve_em∂oyìs
(
FILE
 *
Â
,
EMPLOYEE
*);

13 
ßve_ªw¨dpunish
(
FILE
 *
Â
,
RP
*);

	@global.h

1 
	~"em∂oyì.h
"

2 
	sglobÆ_öfo


4 
EMPLOYEE
 *
	mem_hód
;

5 }
	tGINFO
;

	@init.c

1 
	~<°dlib.h
>

2 
	~<°dio.h
>

3 
	~"globÆ.h
"

4 
	~"fûe›.h
"

5 
	~"öô.h
"

9 
GINFO
* 
	$öô_sys
()

11 
FILE
 *
Âem
;

12 
FILE
 *
ÂΩ
;

13 
GINFO
* 
pgöfo
=(GINFO *)
	`mÆloc
((GINFO));

14 
pgöfo
->
em_cou¡
=0;

15 
pgöfo
->
Ω_cou¡
=0;

16 
pgöfo
->
em_hód
=
NULL
;

17 
pgöfo
->
Ω_hód
=
NULL
;

18 if(
	`öô_fûes
(&
Âem
,&
ÂΩ
)==0)

20 
	`ßve_Æl
(
Âem
,
pgöfo
);

21 
	`ßve_Æl
(
ÂΩ
,
pgöfo
);

26 
pgöfo
=
	`lﬂd_Æl
(
Âem
,
ÂΩ
);

27 
	`f˛o£
(
Âem
);

28 
	`f˛o£
(
ÂΩ
);

29  
pgöfo
;

30 
	}
}

34 
	$öô_fûes
(
FILE
 **
Âem
,FILE **
ÂΩ
)

36 
FILE
 *
Â_em∂oyì
=
NULL
;

37 
FILE
 *
Â_ªw¨dpunish
=
NULL
;

38 
Â_em∂oyì
=
	`f›í
("../data/emdata","rb");

39 
Â_ªw¨dpunish
=
	`f›í
("../data/rpdata","rb");

40 if((
Â_em∂oyì
==
NULL
Ë|| (
Â_ªw¨dpunish
==NULL))

42 
Â_em∂oyì
=
	`f›í
("../data/emdata","wb+");

43 if(
Â_em∂oyì
==
NULL
)

45 
	`Ârötf
(
°dîr
,"Êó†Ê≥ïÂàõÂª∫Êñá‰ª∂!\n");

46 
	`exô
(1);

48 
Â_ªw¨dpunish
=
	`f›í
("../data/rpdata","wb+");

50 if(
Â_ªw¨dpunish
==
NULL
)

52 
	`Ârötf
(
°dîr
,"Êó†Ê≥ïÂàõÂª∫Êñá‰ª∂!\n");

53 
	`exô
(1);

56 *
Âem
=
Â_em∂oyì
;

57 *
ÂΩ
=
Â_ªw¨dpunish
;

60 *
Âem
=
Â_em∂oyì
;

61 *
ÂΩ
=
Â_ªw¨dpunish
;

64 
	}
}

	@init.h

1 
	~<°dio.h
>

2 
	~"globÆ.h
"

3 
GINFO
* 
öô_sys
();

4 
öô_fûes
(
FILE
**,FILE**);

	@menu.c

1 
	~<°dlib.h
>

2 
	~"míu.h
"

3 
	$míu
(
GINFO
 *
pgöfo
)

5 
sw
=0;

6 
FILE
 *
Âem
=
NULL
;

9 
	`sy°em
("clear");

10 
	`¥ötf
("------------Personnel Management System-----------\n");

11 
	`¥ötf
("1.ÂëòÂ∑•‰ø°ÊÅØÊìç‰Ωú\n");

12 
	`¥ötf
("2.ÂëòÂ∑•Â•ñÊÉ©Êìç‰Ωú\n");

13 
	`¥ötf
("3.ËÆ°ÁÆóÂëòÂ∑•Â∑•ËµÑ\n");

14 
	`¥ötf
("4.ÈÄÄÂá∫\n");

15 
	`¥ötf
("ËØ∑ËæìÂÖ•ÈÄâÈ°π:");

16 
	`sˇnf
("%d",&
sw
)==0)

18 
	`¥ötf
("ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÈÄâÈ°π:");

19 
	`gëch¨
()!='\n');

21 
sw
)

24 
	`›_emöfo
(
pgöfo
->
em_hód
);

33 
Âem
=
	`f›í
("../data/emdata","r+");

34 if(
Âem
==
NULL
)

36 
	`Ârötf
(
°dîr
,"ÊâìÂºÄÂëòÂ∑•‰ø°ÊÅØÊñá‰ª∂Â§±Ë¥•!\n");

37 
	`exô
(0);

39 
pgöfo
->
em_cou¡
=
	`gë_em∂oyì_cou¡
’göfo->
em_hód
);

40 
	`ßve_Æl
(
Âem
,
pgöfo
);

41 
	`f˛o£
(
Âem
);

44 
	`¥ötf
("ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÈÄâÈ°π:");

49 
	}
}

50 
	$›_emöfo
(
EMPLOYEE
* 
em_hód
)

52 
sw
=0;

53 
dútyd©a
=0;

54 
EMPLOYEE
* 
≥m
=
NULL
;

55 
FILE
 *
Âem
=
NULL
;

58 
	`sy°em
("clear");

59 
	`£tbuf
(
°dö
,
NULL
);

60 
	`¥ötf
("***************ÂëòÂ∑•‰ø°ÊÅØÊìç‰Ωú***************\n");

61 
	`¥ötf
("1.Êü•ÁúãÂëòÂ∑•‰ø°ÊÅØ\n");

62 
	`¥ötf
("2.Ê∑ªÂä†ÂëòÂ∑•‰ø°ÊÅØ\n");

63 
	`¥ötf
("3.Âà†Èô§ÂëòÂ∑•‰ø°ÊÅØ\n");

64 
	`¥ötf
("4.ËøîÂõû‰∏äÂ±Ç\n");

65 
	`¥ötf
("ËØ∑ËæìÂÖ•ÈÄâÈ°π:");

66 
	`sˇnf
("%d",&
sw
)==0)

68 
	`¥ötf
("ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÈÄâÈ°π:");

69 
	`gëch¨
()!='\n');

71 
sw
)

74 
	`show_Æl_emöfo
(
em_hód
);

77 
≥m
=
	`öput_⁄e_em∂oyì
();

78 if(
	`add_em∂oyì
(
em_hód
,
≥m
)==1)

80 
dútyd©a
=1;

86 if(
dútyd©a
==1)

88 
Âem
=
	`f›í
("../data/emdata","r+");

89 if(
Âem
==
NULL
)

91 
	`Ârötf
(
°dîr
,"ÊâìÂºÄÂëòÂ∑•‰ø°ÊÅØÊñá‰ª∂Â§±Ë¥•!\n");

92 
	`exô
(0);

94 
	`ßve_em∂oyìs
(
Âem
,
em_hód
);

95 
	`f˛o£
(
Âem
);

99 
	`¥ötf
("ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÈÄâÈ°π:");

104 
	}
}

	@menu.h

1 #i‚de‡
_MENU_H


2 
	#_MENU_H


	)

4 
	~<°dio.h
>

5 
	~<°dlib.h
>

6 
	~"fûe›.h
"

7 
	~"pmsio.h
"

8 
	~"globÆ.h
"

10 
míu
(
GINFO
 *
pgöfo
);

11 
›_emöfo
(
EMPLOYEE
* 
em_hód
);

	@pms.c

1 
	~<°dio.h
>

2 
	~"öô.h
"

3 
	~"míu.h
"

5 
	$maö
()

7 
GINFO
 *
pgöfo
=
NULL
;

8 
pgöfo
=
	`öô_sys
();

9 
	`míu
(
pgöfo
);

11 
	}
}

	@pmsio.c

1 
	~<°dio.h
>

2 
	~"pmsio.h
"

3 
EMPLOYEE
 *
	$öput_⁄e_em∂oyì
()

5 
tôÀ
=-1;

6 
EMPLOYEE
* 
≥m
=(EMPLOYEE*)
	`maö
((EMPLOYEE));

7 
	`¥ötf
("ËØ∑ËæìÂÖ•ÂëòÂ∑•ÂßìÂêç:");

8 
	`sˇnf
("%31s",
≥m
->
«me
);

9 
	`¥ötf
("ÂëòÂ∑•ËÅåÁß∞\n1.ÂàùÁ∫ß\t2.È´òÁ∫ß\t\3.È´òÁ∫ß\nËØ∑ÈÄâÊã©:");

10 
	`sˇnf
("%d",&
tôÀ
)==0)

12 
	`¥ötf
("ËØ∑ËæìÂÖ•Ê≠£Á°ÆÈÄâÈ°π:");

14 
≥m
->
tôÀ
=title;

15 
≥m
->
ßœy
=1000*
tôÀ
;

16 
≥m
->
⁄löe
=1;

18 
	}
}

19 
RP
 * 
	$öput_⁄e_ªw¨dpunish
()

22 
	}
}

	@pmsio.h

1 #i‚de‡
_PMSIO_H


2 
	#_PMSIO_H


	)

4 
	~"em∂oyì.h
"

5 
	~"ªw¨dpunish.h
"

6 
EMPLOYEE
 *
öput_⁄e_em∂oyì
();

7 
RP
 *
öput_⁄e_ªw¨dpunish
();

	@rewardpunish.c

	@rewardpunish.h

1 #i‚de‡
_REWARDPUNISH_H


2 
	#_REWARDPUNISH_H


	)

4 #i‚de‡
_RPFLAG


5 
	#_RPFLAG


	)

8 
	#RP_SAVE_SIZE
 ((
RP
))

9 

	)

10 
	sªw¨d_punish


12 
	mid
;

13 #ifde‡
_RPFLAG


14 
	mΩÊag
;

16 
	mm⁄ey
;

17 
	md©a
;

18 
	mdes¸ùti⁄
[128];

19 
ªw¨d_punish
* 
	m√xt
;

20 }
	tRP
;

	@
1
.
0
14
129
employee.c
employee.h
fileop.c
fileop.h
global.h
init.c
init.h
menu.c
menu.h
pms.c
pmsio.c
pmsio.h
rewardpunish.c
rewardpunish.h
