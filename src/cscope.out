cscope 15 $HOME/develop/c/pms/src -q 0000000079 0000007737
	@employee.c

	@employee.h

1 #i‚de‡
_EMPLOYEES_H


2 
	#_EMPLOYEES_H


	)

4 
	#EMP_SAVE_SIZE
 ((
EMPLOYEE
)-(EMPLOYEE*))

	)

5 
	sem∂oyì


7 
	mid
;

8 
	m«me
[32];

9 
	mtôÀ
[16];

10 
	mßœy
;

11 
	m⁄löe
;

12 
em∂oyì
* 
	m√xt
;

13 }
	tEMPLOYEE
;

	@fileop.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~"em∂oyì.h
"

4 
	~"ªw¨dpunish.h
"

5 
	~"globÆ.h
"

6 
	~"fûe›.h
"

10 
GINFO
 *
	$lﬂd_Æl
(
FILE
 *
Âem
,FILE *
ÂΩ
)

12 
GINFO
 *
pgöfo
=(GINFO*)
	`mÆloc
((GINFO));

13 
	`f£ek
(
Âem
,0,
SEEK_SET
);

14 
	`f£ek
(
ÂΩ
,0,
SEEK_SET
);

15 if(
	`‰ód
(
pgöfo
,(
GINFO
),1,
Âem
)<1)

17 
	`Ârötf
(
°dîr
,"Âä†ËΩΩÈÖçÁΩÆÊñá‰ª∂Â§±Ë¥•!\n");

18 
	`exô
(1);

20 
pgöfo
->
em_hód
=
	`lﬂd_em∂oyìs
(
Âem
,pgöfo->
em_cou¡
);

21 
pgöfo
->
Ω_hód
=
	`lﬂd_ªw¨dpunish
(
ÂΩ
,pgöfo->
Ω_cou¡
);

23  
pgöfo
;

24 
	}
}

28 
EMPLOYEE
 *
	$lﬂd_em∂oyìs
(
FILE
 *
Â
,
cou¡
)

30 
i
=0;

31 if(
cou¡
<1)

33  
NULL
;

35 
EMPLOYEE
* 
phód
=(EMPLOYEE*)
	`mÆloc
(
EMP_SAVE_SIZE
);

36 
EMPLOYEE
* 
±mp
=
phód
;

37 
	`f£ek
(
Â
,(
GINFO
),
SEEK_SET
);

38 if(
±mp
==
NULL
)

40 
	`exô
(1);

42 
i
=0;i<
cou¡
-1;i++)

44 
	`‰ód
(
±mp
,(
EMP_SAVE_SIZE
),1,
Â
);

45 
±mp
->
√xt
=(
EMPLOYEE
*)
	`mÆloc
(
EMP_SAVE_SIZE
);

46 if(
±mp
->
√xt
==
NULL
)

48 
	`Ârötf
(
°dîr
,"memoryállocationÉrror!\n");

49 
	`exô
(1);

51 
±mp
ıtmp->
√xt
;

53 
	`‰ód
(
±mp
,(
EMP_SAVE_SIZE
),1,
Â
);

54 
±mp
->
√xt
=
NULL
;

55  
phód
;

56 
	}
}

60 
RP
 *
	$lﬂd_ªw¨dpunish
(
FILE
 *
Â
,
cou¡
)

62 
i
=0;

63 if(
cou¡
<1)

65  
NULL
;

67 
RP
 * 
phód
=(RP*)
	`mÆloc
(
RP_SAVE_SIZE
);

68 
RP
 * 
±mp
=
phód
;

69 
	`f£ek
(
Â
,(
GINFO
),
SEEK_SET
);

70 if(
±mp
==
NULL
)

72 
	`exô
(1);

74 
i
=0;i<
cou¡
-1;i++)

76 
	`‰ód
(
±mp
,(
RP_SAVE_SIZE
),1,
Â
);

77 
±mp
->
√xt
=(
RP
*)
	`mÆloc
(
RP_SAVE_SIZE
);

78 if(
±mp
->
√xt
==
NULL
)

80 
	`Ârötf
(
°dîr
,"memoryállocationÉrror!\n");

81 
	`exô
(1);

83 
±mp
ıtmp->
√xt
;

85 
	`‰ód
(
±mp
,(
RP_SAVE_SIZE
),1,
Â
);

86 
±mp
->
√xt
=
NULL
;

87  
phód
;

88 
	}
}

93 
	$ßve_Æl
(
FILE
 *
Â
,
GINFO
* 
pgöfo
)

95 if(
Â
==
NULL
)

99 
	`f£ek
(
Â
,0,
SEEK_SET
);

100 if(
	`fwrôe
(
pgöfo
,(
GINFO
),1,
Â
)!=1)

102 
	`Ârötf
(
°dîr
,"save fileÉrror!\n");

103 
	`exô
(1);

105 
	}
}

109 
ßve_em∂oyìs
(
FILE
 *
Â
,
EMPLOYEE
*);

113 
	$ßve_ªw¨dpunish
(
FILE
 *
Â
,
RP
* 
¥p
)

116 
	}
}

	@fileop.h

1 #i‚de‡
_FILEOP_H


2 
	#_FILEOP_H


	)

4 
	~<°dio.h
>

5 
	~"globÆ.h
"

6 
	~"em∂oyì.h
"

7 
GINFO
 *
lﬂd_Æl
(
FILE
 *
Âem
,FILE*
ÂΩ
);

8 
EMPLOYEE
 *
lﬂd_em∂oyìs
(
FILE
 *
Â
,
cou¡
);

9 
RP
 *
lﬂd_ªw¨dpunish
(
FILE
 *
Â
,
cou¡
);

11 
ßve_Æl
(
FILE
 *
Â
,
GINFO
* 
pgöfo
);

12 
ßve_em∂oyìs
(
FILE
 *
Â
,
EMPLOYEE
*);

13 
ßve_ªw¨dpunish
(
FILE
 *
Â
,
RP
*);

	@global.h

1 
	~"em∂oyì.h
"

2 
	sglobÆ_öfo


4 
EMPLOYEE
 *
	mem_hód
;

5 }
	tGINFO
;

	@init.c

1 
	~<°dlib.h
>

2 
	~<°dio.h
>

3 
	~"globÆ.h
"

4 
	~"fûe›.h
"

5 
	~"öô.h
"

9 
GINFO
* 
	$öô_sys
()

11 
FILE
 *
Âem
;

12 
FILE
 *
ÂΩ
;

13 
GINFO
* 
pgöfo
=(GINFO *)
	`mÆloc
((GINFO));

14 
pgöfo
->
em_cou¡
=0;

15 
pgöfo
->
Ω_cou¡
=0;

16 
pgöfo
->
em_hód
=
NULL
;

17 
pgöfo
->
Ω_hód
=
NULL
;

18 if(
	`öô_fûes
(&
Âem
,&
ÂΩ
)==0)

20 
	`ßve_Æl
(
Âem
,
pgöfo
);

21 
	`ßve_Æl
(
ÂΩ
,
pgöfo
);

26 
pgöfo
=
	`lﬂd_Æl
(
Âem
,
ÂΩ
);

27 
	`f˛o£
(
Âem
);

28 
	`f˛o£
(
ÂΩ
);

29  
pgöfo
;

30 
	}
}

34 
	$öô_fûes
(
FILE
 **
Âem
,FILE **
ÂΩ
)

36 
FILE
 *
Â_em∂oyì
=
NULL
;

37 
FILE
 *
Â_ªw¨dpunish
=
NULL
;

38 
Â_em∂oyì
=
	`f›í
("../data/emdata","rb");

39 
Â_ªw¨dpunish
=
	`f›í
("../data/rpdata","rb");

40 if((
Â_em∂oyì
==
NULL
Ë|| (
Â_ªw¨dpunish
==NULL))

42 
Â_em∂oyì
=
	`f›í
("../data/emdata","wb+");

43 if(
Â_em∂oyì
==
NULL
)

45 
	`Ârötf
(
°dîr
,"Êó†Ê≥ïÂàõÂª∫Êñá‰ª∂!\n");

46 
	`exô
(1);

48 
Â_ªw¨dpunish
=
	`f›í
("../data/rpdata","wb+");

50 if(
Â_ªw¨dpunish
==
NULL
)

52 
	`Ârötf
(
°dîr
,"Êó†Ê≥ïÂàõÂª∫Êñá‰ª∂!\n");

53 
	`exô
(1);

56 *
Âem
=
Â_em∂oyì
;

57 *
ÂΩ
=
Â_ªw¨dpunish
;

60 *
Âem
=
Â_em∂oyì
;

61 *
ÂΩ
=
Â_ªw¨dpunish
;

64 
	}
}

	@init.c

1 
	~<°dlib.h
>

2 
	~<°dio.h
>

3 
	~"globÆ.h
"

4 
	~"fûe›.h
"

5 
	~"öô.h
"

9 
GINFO
* 
	$öô_sys
()

11 
FILE
 *
Âem
;

12 
FILE
 *
ÂΩ
;

13 
GINFO
* 
pgöfo
=(GINFO *)
	`mÆloc
((GINFO));

14 
pgöfo
->
em_cou¡
=0;

15 
pgöfo
->
Ω_cou¡
=0;

16 
pgöfo
->
em_hód
=
NULL
;

17 
pgöfo
->
Ω_hód
=
NULL
;

18 if(
	`öô_fûes
(&
Âem
,&
ÂΩ
)==0)

20 
	`ßve_Æl
(
Âem
,
pgöfo
);

21 
	`ßve_Æl
(
ÂΩ
,
pgöfo
);

26 
pgöfo
=
	`lﬂd_Æl
(
Âem
,
ÂΩ
);

27 
	`f˛o£
(
Âem
);

28 
	`f˛o£
(
ÂΩ
);

29  
pgöfo
;

30 
	}
}

34 
	$öô_fûes
(
FILE
 **
Âem
,FILE **
ÂΩ
)

36 
FILE
 *
Â_em∂oyì
=
NULL
;

37 
FILE
 *
Â_ªw¨dpunish
=
NULL
;

38 
Â_em∂oyì
=
	`f›í
("../data/emdata","rb");

39 
Â_ªw¨dpunish
=
	`f›í
("../data/rpdata","rb");

40 if((
Â_em∂oyì
==
NULL
Ë|| (
Â_ªw¨dpunish
==NULL))

42 
Â_em∂oyì
=
	`f›í
("../data/emdata","wb+");

43 if(
Â_em∂oyì
==
NULL
)

45 
	`Ârötf
(
°dîr
,"Êó†Ê≥ïÂàõÂª∫Êñá‰ª∂!\n");

46 
	`exô
(1);

48 
Â_ªw¨dpunish
=
	`f›í
("../data/rpdata","wb+");

50 if(
Â_ªw¨dpunish
==
NULL
)

52 
	`Ârötf
(
°dîr
,"Êó†Ê≥ïÂàõÂª∫Êñá‰ª∂!\n");

53 
	`exô
(1);

56 *
Âem
=
Â_em∂oyì
;

57 *
ÂΩ
=
Â_ªw¨dpunish
;

60 *
Âem
=
Â_em∂oyì
;

61 *
ÂΩ
=
Â_ªw¨dpunish
;

64 
	}
}

	@init.h

1 
	~<°dio.h
>

2 
	~"globÆ.h
"

3 
GINFO
* 
öô_sys
();

4 
öô_fûes
(
FILE
**,FILE**);

	@menu.c

1 
	~"míu.h
"

2 
	$míu
(
GINFO
 *
pgöfo
)

4 
sw
=0;

7 
	`sy°em
("clear");

8 
	`¥ötf
("------------Personnel Management System-----------\n");

9 
	`¥ötf
("1.ÂëòÂ∑•‰ø°ÊÅØÊìç‰Ωú\n");

10 
	`¥ötf
("2.ÂëòÂ∑•Â•ñÊÉ©Êìç‰Ωú\n");

11 
	`¥ötf
("3.ËÆ°ÁÆóÂëòÂ∑•Â∑•ËµÑ\n");

12 
	`¥ötf
("4.ÈÄÄÂá∫\n");

13 
	`¥ötf
("ËØ∑ËæìÂÖ•ÈÄâÈ°π:");

14 
	`sˇnf
("%d",&
sw
)==0)

16 
	`¥ötf
("ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÈÄâÈ°π:");

17 
	`gëch¨
()!='\n');

19 
sw
)

22 
	`›_emöfo
(
pgöfo
->
em_hód
);

33 
	`¥ötf
("ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÈÄâÈ°π:");

38 
	}
}

39 
	$›_emöfo
(
EMPLOYEE
* 
em_hód
)

41 
sw
=0;

44 
	`sy°em
("clear");

45 
	`£tbuf
(
°dö
,
NULL
);

46 
	`¥ötf
("***************ÂëòÂ∑•‰ø°ÊÅØÊìç‰Ωú***************\n");

47 
	`¥ötf
("1.Êü•ÁúãÂëòÂ∑•‰ø°ÊÅØ\n");

48 
	`¥ötf
("2.Ê∑ªÂä†ÂëòÂ∑•‰ø°ÊÅØ\n");

49 
	`¥ötf
("3.Âà†Èô§ÂëòÂ∑•‰ø°ÊÅØ\n");

50 
	`¥ötf
("4.ËøîÂõû‰∏äÂ±Ç\n");

51 
	`¥ötf
("ËØ∑ËæìÂÖ•ÈÄâÈ°π:");

52 
	`sˇnf
("%d",&
sw
)==0)

54 
	`¥ötf
("ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÈÄâÈ°π:");

55 
	`gëch¨
()!='\n');

57 
sw
)

60 
	`show_Æl_emöfo
(
em_hód
);

69 
	`¥ötf
("ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÈÄâÈ°π:");

74 
	}
}

75 
	$show_Æl_emöfo
(
EMPLOYEE
* 
em_hód
)

77 
EMPLOYEE
* 
±mp
=
em_hód
;

78 if(
±mp
==
NULL
)

80 
	`¥ötf
("ÊöÇÊó†ÂëòÂ∑•‰ø°ÊÅØ\n");

81 
	`£tbuf
(
°dö
,
NULL
);

82 
	`gëch¨
();

85 
±mp
!=
NULL
)

87 
	`show_em∂oyì
(
±mp
);

88 
±mp
ıtmp->
√xt
;

91 
	}
}

92 
	$show_em∂oyì
(
EMPLOYEE
* 
≥m
)

94 if(
≥m
==
NULL
)

98 
	`¥ötf
("ID:%d\n",
≥m
->
id
);

99 
	`¥ötf
("ÂßìÂêç:%s\n",
≥m
->
«me
);

100 
	`¥ötf
("ËÅåÁß∞:%s\n",
≥m
->
tôÀ
);

101 
	`¥ötf
("Âü∫Êú¨Ëñ™ËµÑ:%d",
≥m
->
ßœy
);

102 if(
≥m
->
⁄löe
)

104 
	`¥ötf
("Â∑•‰ΩúÁä∂ÊÄÅ:Âú®ËÅå\n");

109 
	`¥ötf
("Â∑•‰ΩúÁä∂ÊÄÅ:Á¶ªËÅå\n");

111 
	}
}

	@menu.h

1 #i‚de‡
_MENU_H


2 
	#_MENU_H


	)

4 
	~<°dio.h
>

5 
	~"globÆ.h
"

6 
míu
(
GINFO
 *
pgöfo
);

7 
›_emöfo
(
EMPLOYEE
* 
em_hód
);

8 
show_Æl_emöfo
(
EMPLOYEE
* 
em_hód
);

9 
show_em∂oyì
(
EMPLOYEE
* 
≥m
);

	@pms.c

1 
	~<°dio.h
>

2 
	~"öô.h
"

3 
	~"míu.h
"

5 
	$maö
()

7 
GINFO
 *
pgöfo
=
NULL
;

8 
pgöfo
=
	`öô_sys
();

9 
	`míu
(
pgöfo
);

11 
	}
}

	@rewardpunish.c

	@rewardpunish.h

1 #i‚de‡
_REWARDPUNISH_H


2 
	#_REWARDPUNISH_H


	)

4 #i‚de‡
_RPFLAG


5 
	#_RPFLAG


	)

8 
	#RP_SAVE_SIZE
 ((
RP
))

9 

	)

10 
	sªw¨d_punish


12 
	mid
;

13 #ifde‡
_RPFLAG


14 
	mΩÊag
;

16 
	mm⁄ey
;

17 
	md©a
;

18 
	mdes¸ùti⁄
[128];

19 
ªw¨d_punish
* 
	m√xt
;

20 }
	tRP
;

	@
1
.
0
13
120
employee.c
employee.h
fileop.c
fileop.h
global.h
init.c
init.c
init.h
menu.c
menu.h
pms.c
rewardpunish.c
rewardpunish.h
